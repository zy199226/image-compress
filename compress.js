!function(n){function e(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return n[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var t={};e.m=n,e.c=t,e.d=function(n,t,i){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:i})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="/",e(e.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction ZyCompress(t, e) {\n    this.t = t;\n    this.format = e.format;\n    this.size = e.size;\n    this.width = e.width;\n    this.imgPercent = 1;\n}\n\nZyCompress.prototype = {\n    constructor: ZyCompress,\n    asyncCompress: function asyncCompress() {\n        var _this = this;\n\n        return new Promise(function (resolve) {\n            _this.readFile().then(function (t) {\n                return resolve(t);\n            });\n        });\n    },\n    readFile: function readFile() {\n        var _this2 = this;\n\n        return new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                var img = new Image();\n                var type = reader.result.split(';')[0].split('/')[1];\n                img.src = reader.result;\n                _this2.src = reader.result;\n                _this2.type = type;\n                _this2.readerLength = reader.result.length;\n                _this2.total = e.total;\n                _this2.img = img;\n                resolve(_this2);\n            };\n            if (_this2.t.files && _this2.t.files[0]) {\n                reader.readAsDataURL(_this2.t.files[0]);\n            }\n        });\n    },\n    judge: function judge() {\n        var _this3 = this;\n\n        return new Promise(function (resolve) {\n            if (_this3.width) {\n                _this3.imgPercent = _this3.img.width > _this3.width ? _this3.width / _this3.img.width : 1;\n                _this3.imgCompress();\n            } else if (_this3.type === _this3.format) {\n                _this3.imgPercent = _this3.total > _this3.size * 1024 ? Math.sqrt(_this3.size * 1024 * 0.88 / _this3.total) : 1;\n                _this3.imgCompress();\n            } else {\n                _this3.imgCompress().then(function (l) {\n                    var size = l * _this3.total / _this3.readerLength;\n                    if (size > _this3.size * 1024) {\n                        _this3.img.src = _this3.src;\n                        _this3.imgPercent = Math.sqrt(_this3.size * 1024 * 0.88 / size);\n                        _this3.imgCompress();\n                    }\n                });\n            }\n            resolve(_this3.img.src);\n        });\n    },\n    imgCompress: function imgCompress() {\n        var _this4 = this;\n\n        return new Promise(function (resolve) {\n            var cw = _this4.img.width * _this4.imgPercent;\n            var ch = _this4.img.height * _this4.imgPercent;\n            var canvas = document.createElement('canvas');\n            canvas.width = cw;\n            canvas.height = ch;\n            canvas.getContext('2d').drawImage(_this4.img, 0, 0, _this4.img.width, _this4.img.height, 0, 0, cw, ch);\n            _this4.img.src = canvas.toDataURL('image/' + _this4.format, 1.0);\n            resolve(canvas.toDataURL('image/' + _this4.format, 1.0).length);\n        });\n    }\n};\n\nObject.defineProperty(Object.prototype, 'compress', {\n    value: function value(e) {\n        var zyCom = new ZyCompress(this, e);\n        return new Promise(function (resolve) {\n            zyCom.asyncCompress().then(function (t) {\n                t.judge().then(function (t) {\n                    return resolve(t);\n                });\n            });\n        });\n    },\n\n    enumerable: false,\n    configurable: true,\n    writable: false\n});\n\n//////////////////\n// WEBPACK FOOTER\n// ./p.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///./p.js?")}]);